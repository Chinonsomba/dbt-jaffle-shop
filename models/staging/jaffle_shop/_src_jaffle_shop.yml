sources:
  - name: jaffle_shop
    description: "Raw source system containing jaffle shop operational data"
    database: raw
    schema: jaffle_shop

    tables:

      - name: customers
        description: "Raw customers table"

        columns:
          - name: ID
            description: "Primary key"
            tests:
              - not_null
              - unique

          - name: FIRST_NAME
            description: "Customer first name"

          - name: LAST_NAME
            description: "Customer last name"

      - name: orders
        description: "Raw orders table"

        columns:

          - name: ID
            description: "Primary key"
            tests:
              - not_null
              - unique

          - name: USER_ID
            description: "Foreign key to customers table"
            tests:
              - not_null
              - relationships:
                  to: source('jaffle_shop','customers')
                  field: ID

          - name: ORDER_DATE
            description: "Date order was placed"

          - name: STATUS
            description: "Order status"
            tests:
              - accepted_values:
                  values:
                    - placed
                    - shipped
                    - completed
                    - return_pending
                    - returned

          - name: _ETL_LOADED_AT
            description: "ETL load timestamp"